import{n as r,b as i,L as o}from"./components-DpxtCXPw.js";const n={name:"MainRegister",components:{Logo:o,BaseText:i},props:{test:{type:Boolean,default:!1}},data(){return{username:null,email:null,password:null,password2:null,input_error:!1,finished:!1,loading:!1}},watch:{},beforeMount(){},mounted(){},computed:{},methods:{validate(){this.email=this.email.trim();var s=new RegExp(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/);if(!s.test(this.email)){this.putError("Invalid email");return}if(!this.username||this.username.length===0){this.putError("Type username");return}if(this.username.length<4){this.putError("Username must have a least 4 characters");return}if(this.username.length>18){this.putError("Username must have max 18 characters");return}if(!this.password||this.password.length===0){this.putError("Type password");return}if(this.password.length<8){this.putError("Password must have a least 8 characters");return}this.send()},putError(s){this.$store.commit("DEFINE_SNACK",{error:!0,text:s}),this.input_error=!0,setTimeout(()=>{this.input_error=!1},1500)},send(){this.loading=!0,axios.post(Vue.preUrl+"/registration",{username:this.username,email:this.email.toLowerCase(),password:this.password}).then(s=>{if(s.data==="OK")this.finished=!0;else throw new Error}).catch(s=>{console.log(s),this.$store.commit("DEFINE_SNACK",{active:!0,error:!0,text:s,type:"error"})}).then(()=>{this.loading=!1})}}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"TTT_Layout"},[t.finished?e("div",{staticClass:"TTT_Finished"},[e("div",{staticClass:"TTT_FinishedText"},[t._v(t._s(t.$t("m_allmostDone"))+"!")]),e("div",{staticClass:"TTT_FinishedSub"},[t._v(t._s(t.$t("p_checkYourEmailBox")))]),e("div",{staticClass:"TTT_Tip2"},[t._v(t._s(t.$t("p_spamToo")))]),e("router-link",{staticClass:"D_Link D_LinkPlus Space_Top",staticStyle:{"font-size":"14px"},attrs:{to:{name:"Records"}}},[t._v(t._s(t.$t("m_backHome")))])],1):e("div",{staticClass:"TTT_Box"},[e("div",{staticClass:"TTT_Mid"},[e("BaseText",{staticClass:"Space_Bottom",attrs:{type:"normal",label:t.$t("m_username"),placeholder:""},model:{value:t.username,callback:function(a){t.username=a},expression:"username"}}),e("BaseText",{staticClass:"Space_Bottom",attrs:{autocomplete:"new-email",type:"normal",label:t.$t("m_email"),placeholder:""},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}}),e("BaseText",{staticClass:"Space_Bottom",attrs:{autocomplete:"new-password",intype:"password",type:"normal",label:t.$t("m_password"),placeholder:t.$t("m_charLeast",{n:8})},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}}),e("BaseText",{staticClass:"Space_Bottom",attrs:{intype:"password",type:"normal",label:t.$t("m_repeatPassword"),placeholder:t.$t("m_charLeast",{n:8})},model:{value:t.password2,callback:function(a){t.password2=a},expression:"password2"}})],1),e("div",{staticClass:"TTT_Bottom"},[e("button",{staticClass:"D_Button D_ButtonDark TTT_Button",class:{D_Button_Loading:t.loading,D_Button_Error:t.input_error},attrs:{disabled:t.loading||t.input_error},on:{click:function(a){return t.validate()}}},[t._v(t._s(t.$t("m_register")))]),e("div",{staticClass:"TTT_Tip"},[t._v(t._s(t.$t("p_confirmationWillSent")))]),e("router-link",{staticClass:"D_Link Space_Top",staticStyle:{"font-size":"14px"},attrs:{to:{name:"Records"}}},[t._v(t._s(t.$t("m_cancel")))])],1)])])},c=[],m=r(n,l,c,!1,null,null);const u=m.exports;export{u as default};
