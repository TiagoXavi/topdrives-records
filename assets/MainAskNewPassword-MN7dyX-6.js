import{n as i,b as r,L as o}from"./components-DpxtCXPw.js";const n={name:"MainAskNewPassword",components:{Logo:o,BaseText:r},props:{},data(){return{email:null,input_error:!1,finished:!1,loading:!1,error:!1}},watch:{},beforeMount(){},mounted(){},computed:{},methods:{validate(){this.email=this.email.trim();var s=new RegExp(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/);if(!s.test(this.email)){this.putError("Invalid email");return}this.send()},putError(s){this.$store.commit("DEFINE_SNACK",{error:!0,text:s}),this.input_error=!0,setTimeout(()=>{this.input_error=!1},1500)},send(){this.loading=!0,axios.post(Vue.preUrl+"/sendEmailReset",{email:this.email.toLowerCase()}).then(s=>{if(s.data==="OK")this.finished=!0,this.error=!1;else throw new Error}).catch(s=>{this.error=!0,console.log(s),this.$store.commit("DEFINE_SNACK",{active:!0,error:!0,text:s,type:"error"})}).then(()=>{this.loading=!1})}}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"TTT_Layout"},[t.finished?e("div",{staticClass:"TTT_Finished"},[e("div",{staticClass:"TTT_FinishedText"},[t._v(t._s(t.$t("m_done"))+"!")]),e("div",{staticClass:"TTT_SubTitle Space_BothPlus"},[t._v(t._s(t.$t("p_resetPassIfExist")))]),e("router-link",{staticClass:"D_Link D_LinkPlus Space_Top",staticStyle:{"font-size":"14px"},attrs:{to:{name:"Records"}}},[t._v(t._s(t.$t("m_backHome")))])],1):e("div",{staticClass:"TTT_Box"},[e("div",{staticClass:"TTT_Mid"},[e("div",{staticClass:"TTT_SubTitle"},[t._v(t._s(t.$t("p_resetPassHelper")))]),e("BaseText",{staticClass:"Space_Bottom",attrs:{type:"normal",label:t.$t("m_email"),placeholder:""},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}})],1),e("div",{staticClass:"TTT_Bottom"},[e("button",{staticClass:"D_Button D_ButtonDark TTT_Button",class:{D_Button_Loading:t.loading,D_Button_Error:t.input_error},attrs:{disabled:t.loading||t.input_error},on:{click:function(a){return t.validate()}}},[t._v(t._s(t.$t("m_send")))]),e("router-link",{staticClass:"D_Link Space_Top",staticStyle:{"font-size":"14px"},attrs:{to:{name:"Records"}}},[t._v(t._s(t.$t("m_cancel")))])],1)])])},_=[],c=i(n,l,_,!1,null,null);const u=c.exports;export{u as default};
