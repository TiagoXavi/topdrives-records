import{n as T,c as v}from"./index-BR-PFC2m.js";const R={name:"BaseTypeName",components:{},props:{type:{type:String,default:"00"},showDry:{type:Boolean,default:!0},trackId:{type:String,default:""}},data(){return{}},watch:{},beforeMount(){},mounted(){},computed:{},methods:{}};var k=function(){var t=this,s=t._self._c;return s("div",{staticClass:"BaseTypeName_Layout"},[t.type[0]=="1"?s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))]):t.type[0]=="2"?s("span",{staticClass:"TypeText_Gravel"},[t._v(t._s(t.$t("s_gravel")))]):t.type[0]=="3"?s("span",{staticClass:"TypeText_Ice"},[t._v(t._s(t.$t("s_ice")))]):t.type[0]=="5"?s("span",{staticClass:"TypeText_Sand"},[t._v(t._s(t.$t("s_sand")))]):t.type[0]=="6"?s("span",{staticClass:"TypeText_Snow"},[t._v(t._s(t.$t("s_snow")))]):t.type[0]=="7"?s("span",{staticClass:"TypeText_Grass"},[t._v(t._s(t.$t("s_grass")))]):[t.type=="e0"?[s("span",{staticClass:"TypeText_Sand"},[t._v(t._s(t.$t("s_sand")))]),s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))])]:t.type=="f0"?[s("span",{staticClass:"TypeText_Dry"},[t._v(t._s(t.$t("s_aspht")))]),s("span",{staticClass:"TypeText_Grass"},[t._v(t._s(t.$t("s_grass")))]),s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))])]:t.type=="g0"?[s("span",{staticClass:"TypeText_Ice"},[t._v(t._s(t.$t("s_ice")))]),s("span",{staticClass:"TypeText_Snow"},[t._v(t._s(t.$t("s_snow")))])]:t.type=="h0"||t.type=="h1"?[s("span",{staticClass:"TypeText_Snow"},[t._v(t._s(t.$t("s_snow")))]),s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))])]:[t.type!=="01"&&(t.showDry||t.type!=="00")?s("span",{staticClass:"TypeText_Dry"},[t._v(t._s(t.$t("s_aspht")))]):t._e(),t.type=="40"?s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))]):t.type=="b0"?s("span",{staticClass:"TypeText_Gravel"},[t._v(t._s(t.$t("s_gravel")))]):t.type=="c0"?s("span",{staticClass:"TypeText_Sand"},[t._v(t._s(t.$t("s_sand")))]):t.type=="d0"?s("span",{staticClass:"TypeText_Snow"},[t._v(t._s(t.$t("s_snow")))]):t.type=="41"?s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))]):t.type=="c1"?s("span",{staticClass:"TypeText_Sand"},[t._v(t._s(t.$t("s_sand")))]):t._e()]],t.type[1]=="1"?s("span",{staticClass:"TypeText_Wet"},[t._v(t._s(t.$t("s_wet")))]):t._e()],2)},D=[],I=T(R,k,D,!1,null,null);const B=I.exports,x={name:"BaseCustomTag",render(a){return a(this.$attrs.tag,{on:this.$listeners,attrs:this.$attrs},this.$slots.default)}},b=null,L=null;var S=T(x,b,L,!1,null,null);const E=S.exports,P={name:"BaseTrackType",components:{BaseIconSvg:v,BaseCustomTag:E},props:{circuit:{type:[Object,Array],default(){return{}}},isTrackSet:{type:Boolean,default:!1},mode:{type:String,default:"compare"},trackType:{type:String,default:""},isButton:{type:Boolean,default:!0},dataid:{},perc:{}},data(){return{}},watch:{},beforeMount(){},mounted(){},computed:{resolvedList(){return this.isTrackSet?this.circuit.map(a=>a.type):this.trackType?[this.trackType]:this.circuit.types}},methods:{resolveToTrackObj(a,t,s){this.isTrackSet?this.$emit("toggleTrackSet",this.circuit[t].tracks):this.$emit("toggleTrack",{track:`${this.circuit.id}_a${a}`,e:s})}}};var V=function(){var t=this,s=t._self._c;return s("div",{staticStyle:{display:"contents"}},t._l(t.resolvedList,function(e,o){return s("div",{staticClass:"BaseTrackType_Button BaseTrackType_Item",class:`Type_${e} ${t.isButton?"D_Button D_ButtonDark D_ButtonDark2 ":""}${t.circuit[e]===!0&&t.mode==="compare"?"BaseTrackType_Active ":""}${t.isTrackSet&&t.circuit[o].active?"BaseTrackType_Active ":""}`,attrs:{dataid:t.dataid,dataitype:o,datatype:e}},[s("i",{staticClass:"BaseTrackType_Icon TdIconCondRel",class:`tdicon-${e}`,attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"path00"}),s("span",{staticClass:"path01"}),s("span",{staticClass:"path1"}),s("span",{staticClass:"path2"}),s("span",{staticClass:"path3"}),s("span",{staticClass:"path4"}),s("div",{staticClass:"TdIconCondPercGroup"},[s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${t.dataid}_a${e}`,0,!1,!0)}},[t._v(t._s(t._f("trackToPerc")(`${t.dataid}_a${e}`,0,!1)))]),s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${t.dataid}_a${e}`,1,!1,!0)}},[t._v(t._s(t._f("trackToPerc")(`${t.dataid}_a${e}`,1,!1)))]),s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${t.dataid}_a${e}`,2,!1,!0)}},[t._v(t._s(t._f("trackToPerc")(`${t.dataid}_a${e}`,2,!1)))])])]),t.isTrackSet?s("div",{staticClass:"BaseTrackType_Label"},[e=="00"?s("span",{staticClass:"TypeText_Dry"},[t._v(t._s(t.$t("s_dry"))+t._s(t.circuit[o].customSufix?` ${t.circuit[o].customSufix}`:""))]):t._e(),e=="01"?s("span",{staticClass:"TypeText_Wet"},[t._v(t._s(t.$t("s_wet")))]):t._e(),e=="10"?s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_dirt")))]):t._e(),e=="11"?s("span",{staticClass:"TypeText_Dirt"},[t._v(t._s(t.$t("s_mud")))]):t._e(),e=="20"?s("span",{staticClass:"TypeText_Gravel"},[t._v(t._s(t.$t("s_gravel")))]):t._e(),e=="30"?s("span",{staticClass:"TypeText_Ice"},[t._v(t._s(t.$t("s_ice")))]):t._e(),e=="50"?s("span",{staticClass:"TypeText_Sand"},[t._v(t._s(t.$t("s_sand")))]):t._e(),e=="60"?s("span",{staticClass:"TypeText_Snow"},[t._v(t._s(t.$t("s_snow")))]):t._e(),e=="70"?s("span",{staticClass:"TypeText_Grass"},[t._v(t._s(t.$t("s_grass")))]):t._e()]):t._e()])}),0)},N=[],A=T(P,V,N,!1,null,null);const M=A.exports;var w=0,y=0,$=0,m=0,l=null,u=0,C=0;const O={name:"Row",components:{BaseTypeName:B,BaseIconSvg:v,BaseTrackType:M},props:{list:{type:Array,default(){return[]}},car:{type:Object,default(){return{}}},highlights:{type:Object,default(){return{}}},countPerTrack:{type:Object,default(){return{}}},carIndex:{type:Number,default:-1},lastIndex:{type:Number,default:-1},maxCarNumber:{type:Number,default:-1},type:{type:String,default:"tracks"},placeholder:{type:String,default:"-"},hoverIndex:{type:Number,default:-1},loggedin:{type:Boolean,default:!1},needSave:{type:Boolean,default:!1},saveLoading:{type:Boolean,default:!1},showCampaignTip:{type:Boolean,default:!0},user:{required:!1},invertedView:{type:Boolean,default:!1},cg:{type:Boolean,default:!1},cgYou:{type:Boolean,default:!1},cgOppo:{type:Boolean,default:!1},forceHideCompactSelect:{type:Boolean,default:!1},forceDisabled:{type:Boolean,default:!1},normalSize:{type:Boolean,default:!1},showingBestPerTrack:{type:Boolean,default:!1},forceCustomAuthor:{type:Boolean,default:!1},forceTune:{type:String,default:null},cgTime:{type:Number,default:null},oppoTime:{type:Number,default:null},customData:{type:Object,default(){return null}},points:{required:!1},showPoints:{type:Boolean,default:!1},isReferencePoints:{type:Boolean,default:!1}},data(){return{errorIndex:null,correctIndex:null,infos:["Tune"],card_speed:null,card_acel:null,card_hand:null,mouseInsideTuneBox:!1,nonUsedTracks:[],indexesToClear:[],detailIndex:null,unsubscribeMutation:null,uploadLoading:!1,alreadyUploaded:!1,votedDownIndex:null,detailsItem:null,dragIndex:null,dragging:!1,timer:null,touchduration:800,timerStart:0,timerEnd:0,touchTrack:null,touchCount:0,voteLoading:!1,successVote:!1,tuneWins:{}}},watch:{detailIndex:function(){this.detailIndex!==null&&this.detailIndex>-1?document.addEventListener("paste",this.interceptPaste):document.removeEventListener("paste",this.interceptPaste)}},beforeMount(){},mounted(){let a=this;this.unsubscribeMutation=a.$store.subscribe(t=>{t.type=="HIDE_DETAIL"&&(a.detailIndex=null)})},beforeDestroy(){this.unsubscribeMutation()},computed:{tun(){return this.forceTune?this.forceTune:this.customData&&this.customData.selectedTune?this.customData.selectedTune:this.car&&this.car.selectedTune?this.car.selectedTune:null},timesResolved(){let a=[],t,s,e,o,n,c,d,_=!1,p=[],h;this.nonUsedTracks=[],this.tuneWins={},this.type==="tracks"?this.list.map(i=>{a.push({text:this.$t("t_"+i.id),textEng:this.$t("t_"+i.id,"en"),cond:i.cond,surface:i.surface,id:i.id,trackType:`${i.surface}${i.cond}`,campaign:i.campaign,campaignNum:i.campaignNum})}):this.type==="times"&&(n=this.car,this.tun&&n.data&&n.data[this.tun]&&n.data[this.tun].times&&(_=!0),this.list.map((i,r)=>{t="",_&&(t=(n.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).t,e=(n.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).down,o=(n.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).up,s=(n.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).u,c=((n.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).d||"").slice(0,10),d=!!(n.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).isTimePredicted),t==null&&(t=""),h={text:t,...i,cond:i.cond,surface:i.surface,id:i.id,trackType:`${i.surface}${i.cond}`,showDetail:!1,downList:e,upList:o,author:s,date:c},d&&(h.isTimePredicted=!0),a.push(h)}));let g=!1;if(this.type==="times"&&this.tun&&this.customData&&this.customData.data&&this.customData.data[this.tun]&&this.customData.data[this.tun].times&&(g=!0),_){a.map(r=>{p.push(`${r.id}_a${r.surface}${r.cond}`)});let i=this;Object.keys(this.car.data[this.tun].times).forEach(function(r){!p.includes(r)&&(i.car.data[i.tun].times[r]||{}).t!==0&&i.nonUsedTracks.push(r)})}else g?this.list.map((i,r)=>{t=(this.customData.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).t,t==null&&(t=""),e=(this.customData.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).down,o=(this.customData.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).up,s=(this.customData.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).u,c=((this.customData.data[this.tun].times[`${i.id}_a${i.surface}${i.cond}`]||{}).d||"").slice(0,10),t===""&&this.cgTime&&(t=this.cgTime),a[0].text=t,a[0].downList=e,a[0].upList=o,a[0].author=s,a[0].date=c}):t===""&&typeof this.cgTime=="number"&&(a[0].text=this.cgTime,this.forceCustomAuthor&&(a[0].author=this.user.username));if(g&&!isNaN(this.oppoTime)){let i=this.list[0].code;Object.keys(this.customData.data).map(r=>{let f=((this.customData.data[r].times||{})[i]||{}).t;this.customData.data[r].times&&!isNaN(f)&&(i.includes("testBowl")?this.oppoTime<f?this.tuneWins[r]=1:this.oppoTime>f?this.tuneWins[r]=-1:this.tuneWins[r]=0:this.oppoTime>f?this.tuneWins[r]=1:this.oppoTime<f?this.tuneWins[r]=-1:this.tuneWins[r]=0,this.oppoTime===0&&f>0&&(this.tuneWins[r]=1),this.oppoTime>0&&f===0&&(this.tuneWins[r]=-1))})}return a},infosResolved(){let a=[];return this.type==="tracks"?this.infos:(this.infos.map(t=>{t==="Tune"&&a.push({type:t})}),a)},tunes(){let a=["332","323","233"];return(this.car.class==="S"||this.car.class==="A")&&a.push("111"),a},tunesCount(){let a=this.car.data;if(this.customData&&this.customData.data&&(a=this.customData.data),!a)return{};let t={};return this.tunes.map(s=>{a[s]&&a[s].times&&(t[s]=Object.keys(a[s].times).filter(e=>(a[s].times[e]||{}).t!==0).length)}),t}},methods:{keydown(a,t,s){a.key==="Enter"&&(a.preventDefault(),a.srcElement.blur(),this.blur(a,t,s))},blur(a,t,s){let e=Vue.options.filters.toTimeNumber(a.srcElement.innerText,t.id),o=Math.round(t.text*100)/100;t.text===""&&(o=""),e===""&&(t.text===""||t.text===void 0)||(a.srcElement.innerText===""&&t.text!==""&&t.text!==void 0?(this.timeEmit(void 0,t,this.car),a.srcElement.innerText=Vue.options.filters.toTimeString(void 0,t.id),this.errorIndex=s,setTimeout(()=>{this.errorIndex=null},1500)):e!==!1&&e!==o?(this.timeEmit(e,t,this.car),a.srcElement.innerText=Vue.options.filters.toTimeString(e,t.id),this.correctIndex=s,setTimeout(()=>{this.correctIndex=null},1500)):e===!1?(a.srcElement.innerText=Vue.options.filters.toTimeString(t.text,t.id),this.errorIndex=s,setTimeout(()=>{this.errorIndex=null},1500)):a.srcElement.innerText=Vue.options.filters.toTimeString(t.text,t.id))},timeEmit(a,t,s){this.cg?this.$emit("changeTime",{number:a,item:t,car:s}):this.$store.commit("CHANGE_TIME",{number:a,item:t,car:s})},contextMenu(a,t,s){return this.timeEmit(void 0,t,this.car),a.srcElement.innerText=Vue.options.filters.toTimeString(void 0,t.id),this.errorIndex=s,setTimeout(()=>{this.errorIndex=null},1500),a.preventDefault(),!1},click(a,t,s){let e=this.detailIndex;this.$store.commit("HIDE_DETAIL",{item:t,car:this.car}),!this.isReferencePoints&&(t.isTimePredicted||(this.$nextTick().then(()=>{this.type==="times"&&this.loggedin&&t.text!==""&&(a.ctrlKey||a.metaKey||t.author!==this.user.username)&&e!==s&&(this.detailIndex=s,this.detailsItem=t)}),this.type==="tracks"&&a.shiftKey&&!this.dragging&&this.$store.commit("DELETE_TRACK",{track:s})))},timevote(a,t,s,e){e==="down"?t.downList&&t.downList.includes(this.user.username)?this.votedDownIndex=null:this.votedDownIndex=s:this.votedDownIndex=null,this.processVote(t,this.car,e)},async interceptPaste(a){if(this.votedDownIndex!==this.detailIndex||(a.preventDefault(),!a.clipboardData.files.length))return;const t=a.clipboardData.files[0];this.uploadPrint(a,this.detailsItem,null,t)},uploadPrint(a,t,s,e=null){if(this.uploadLoading=!0,!e&&(!a.target.files||a.target.files.length===0))return;e||(e=a.target.files[0]);let o=`${window.location.origin}?share=`;o+=`~K${t.id}_a${t.trackType}`,o+=`~C${this.car.rid}~T${this.tun}`;let n=new FormData;n.set("image",e),n.set("config",JSON.stringify({author:this.user.username,car:`${this.car.name} (${this.tun})`,track:`${this.$i18n._vm.messages.en["t_"+t.id]}/${this.$t("t_"+t.id)} - ${Vue.options.filters.resolveCond(t.trackType)}`,currentTime:Vue.options.filters.toTimeString(t.text,t.id),timeAuthor:t.author,url:o})),axios.post(Vue.preUrl+"/uploadproof",n,{headers:{"content-type":"multipart/form-data"}}).then(c=>{this.alreadyUploaded=!0,this.$store.commit("DEFINE_SNACK",{active:!0,correct:!0,text:this.$t("m_uploadSuccess")})}).catch(c=>{console.log(c),this.$store.commit("DEFINE_SNACK",{active:!0,error:!0,text:c,type:"error"})}).then(()=>{this.uploadLoading=!1})},modEdit(a,t,s,e){this.detailIndex=null;let o=a.srcElement.closest(".Row_Item"),n;o&&(n=o.querySelector(".Row_Content")),n&&(n.setAttribute("contenteditable",!0),n.focus())},modDelete(a,t){this.cg?this.$emit("deleteTime",{item:t,car:this.car}):this.$store.commit("DELETE_TIME",{item:t,car:this.car}),this.outsideClick()},outsideClick(){this.$store.commit("HIDE_DETAIL")},showTuneDialog(a){if(this.cg)this.$emit("showTuneDialog");else{if(a.ctrlKey||a.metaKey){this.tun?(this.tempTune=this.tun,this.changeTune(void 0)):this.tempTune&&this.changeTune(this.tempTune);return}this.$store.commit("SHOW_TUNE",{active:!0,car:this.car})}this.outsideClick()},changeTune(a,t=!0){this.outsideClick(),t&&(this.mouseInsideTuneBox=!0),a===this.tun&&(a=void 0),this.cg?this.$emit("changeTune",a):this.$store.commit("CHANGE_TUNE",{tune:a,car:this.car})},changeInput(a){debugger},changeStat(a,t){this.$store.commit("CHANGE_STAT",{type:a,value:t,car:this.car})},mouseEnter(a){var t=Array.prototype.slice.call(a.srcElement.parentElement.children),s=a.srcElement;this.mouseInsideTuneBox=!1,this.$store.commit("HOVER_INDEX",t.indexOf(s))},mouseLeaveTune(a){this.mouseInsideTuneBox=!1},dragMouseDown(a,t){this.type!=="tracks"||this.cg||(this.dragIndex=t,l=document.querySelector("#Row_Track"+this.dragIndex),a=a||window.event,a.preventDefault(),$=a.clientX,m=a.clientY,document.onmouseup=this.closeDragElement,document.onmousemove=this.elementDrag)},elementDrag(a){this.dragging=!0,w=$-a.clientX,y=m-a.clientY,$=a.clientX,m=a.clientY,getComputedStyle(l).getPropertyValue("--drag-left"),getComputedStyle(l).getPropertyValue("--drag-top");let t=getComputedStyle(l).getPropertyValue("--drag-left")-w,s=getComputedStyle(l).getPropertyValue("--drag-top")-y;l.style.setProperty("--drag-left",t),l.style.setProperty("--drag-top",s),l.classList.add("RowTrack_Dragging"),l.parentElement.classList.add("RowTrack_DraggingParent");let e=Number(getComputedStyle(document.body).getPropertyValue("--cell-height").trim().slice(0,-2)),o;this.invertedView&&(o=Number(getComputedStyle(document.querySelector(".Main_2")).getPropertyValue("--cell-width").trim().slice(0,-2))),u=Math.round(s/e),this.invertedView&&(u=Math.round(t/o));let n=Math.abs(u),c=u>0?"RowTrack_PushLeft":"RowTrack_PushRight",d;u!==C&&(C=u,document.querySelectorAll(".Row_Tracks .Row_Item").forEach(_=>{_.classList.remove("RowTrack_PushLeft"),_.classList.remove("RowTrack_PushRight")}),Array.from(Array(n)).map((_,p)=>{u>0?d=document.querySelector("#Row_Track"+(u+this.dragIndex-p)):d=document.querySelector("#Row_Track"+(u+this.dragIndex+p)),d&&d.classList.add(c)}))},closeDragElement(){l.style.setProperty("--drag-left",0),l.style.setProperty("--drag-top",0),l.classList.remove("RowTrack_Dragging"),l.parentElement.classList.remove("RowTrack_DraggingParent"),C=0,document.querySelectorAll(".Row_Tracks .Row_Item").forEach(a=>{a.classList.remove("RowTrack_PushLeft"),a.classList.remove("RowTrack_PushRight")}),u!==0&&this.$emit("newindex",{current:this.dragIndex,new:this.dragIndex+u}),u=0,document.onmouseup=null,document.onmousemove=null,setTimeout(()=>{this.dragging=!1},10)},touchstart(a,t){if(this.type==="tracks"){if(this.touchCount===0){this.timerStart=performance.now(),this.touchCount=this.touchCount+1;return}performance.now()-this.timerStart<400?this.touchCount=this.touchCount+1:(this.timerStart=performance.now(),this.touchCount=1),this.touchCount>2&&(this.$store.commit("DELETE_TRACK",{track:t}),this.touchCount=0)}},touchend(){this.timerEnd=performance.now(),this.timerEnd-this.timerStart>800&&this.type==="tracks"&&this.$store.commit("DELETE_TRACK",{track:this.touchTrack})},processVote(a,t,s){let e=t.selectedTune,o,n=`${a.id}_a${a.surface}${a.cond}`;this.customData?o=this.customData.data[e].times[n]:o=t.data[e].times[n],o.up||Vue.set(o,"up",[]),o.down||Vue.set(o,"down",[]);let c=o.up,d=o.down,_=!1,p=!1;c.includes(this.user.username)&&(s==="up"&&(_=!0),o.up=c.filter(h=>h!==this.user.username)),d.includes(this.user.username)&&(s==="down"&&(p=!0),o.down=d.filter(h=>h!==this.user.username)),!_&&!p?s==="up"?(c.push(this.user.username),this.requestVote(!0,!1,t.rid,e,n)):(d.push(this.user.username),this.requestVote(!1,!1,t.rid,e,n)):_?this.requestVote(!0,!0,t.rid,e,n):this.requestVote(!1,!0,t.rid,e,n)},requestVote(a,t,s,e,o){this.voteLoading=!0;let n={isUp:a,isDelete:t,rid:s,tune:e,track:o};axios.post(Vue.preUrl+"/vote",n).then(c=>{this.successVote=!0,setTimeout(()=>{this.successVote=!1},1e3)}).catch(c=>{console.log(c),this.$store.commit("DEFINE_SNACK",{active:!0,error:!0,text:c,type:"error"})}).then(()=>{this.voteLoading=!1})}}};var U=function(){var t=this,s=t._self._c;return s("div",{staticClass:"Row_Layout",class:{Row_Tracks:t.type==="tracks",Row_Times:t.type==="times",Row_Cg:t.cg,Row_ForceNormalSize:t.normalSize}},[!t.cg||t.cg&&t.cgYou?t._l(t.infosResolved,function(e,o){return s("div",{staticClass:"Row_Item Row_Cell Row_ConfigCell",class:`Row_Tune${t.tun} ${t.cg?"Row_DisableSticky ":""}${t.normalSize?"Row_ForceNormalSizeCell ":""}`,on:{mouseleave:function(n){return t.mouseLeaveTune(n)}}},[e.type==="Tune"?[s("div",{staticClass:"Row_Config"},[(!t.tun||t.mouseInsideTuneBox||t.cgYou)&&!t.forceHideCompactSelect?[s("div",{staticClass:"Row_TuneChooseBox"},[t._l(t.tunes,function(n){return s("button",{staticClass:"D_Button Row_DialogButtonTune Row_TuneChooseButton",class:{Row_DialogButtonTuneActive:t.tun===n,Row_DialogButtonTuneWin:t.tuneWins[n]>0,Row_DialogButtonTuneLose:t.tuneWins[n]<0},on:{click:function(c){return t.changeTune(n)}}},[t._v(" "+t._s(n)+" "),t.tunesCount[n]&&!t.cg?s("div",{staticClass:"D_ButtonNote"},[t._v(t._s(t.tunesCount[n]))]):t._e()])}),s("button",{staticClass:"D_Button Row_ConfigButton",on:{click:function(n){return t.showTuneDialog(n)}}},[s("i",{staticClass:"ticon-gear Row_ConfigIcon",attrs:{"aria-hidden":"true"}})])],2)]:[s("div",{staticClass:"Row_Tune"},[t._v(t._s(t.tun))]),s("div",{staticClass:"Row_ConfigBox"},[s("button",{staticClass:"D_Button Row_ConfigButton",on:{click:function(n){return t.showTuneDialog(n)}}},[s("i",{staticClass:"ticon-gear Row_ConfigIcon",attrs:{"aria-hidden":"true"}})])])]],2)]:[t._t("corner")]],2)}):t._e(),t._l(t.timesResolved,function(e,o){return t.tun||t.type==="tracks"||t.cg&&t.car.rid&&t.tun?s("div",{staticClass:"Row_Item Row_Cell",class:`${t.errorIndex===o?"Row_ItemError ":""}${t.correctIndex===o?"Row_ItemCorrect ":""}${t.type==="times"?"Row_ColorByIndex ":""}${e.text==0?"Row_DNF ":""}${t.hoverIndex==o+1?"Row_Hover ":""}${t.detailIndex===o?"Row_DetailsActive ":""}${t.lastIndex>0?"Row_ColorHighFirst ":""}Type_${t.type==="tracks"?e.trackType:""} ${t.normalSize?"Row_ForceNormalSizeCell ":""}${e.text===null||e.text===void 0||e.text===""?"Row_ContentEmpty ":""}${t.type==="tracks"&&e.text.replace(" (R)","").length>17?"Row_TrackNameBig ":""}${t.type==="tracks"&&e.text.replace(" (R)","").length>22?"Row_TrackNameBigBig ":""}${t.showPoints?"Row_HideColorBack ":""}${t.isReferencePoints?"Row_HideColorBack ":""}${t.showingBestPerTrack?"Row_ShowingBestPerTrack ":""}${e.isTimePredicted?"Row_isTimePredicted ":""}Row_ColorByIndex${t.highlights[`${e.id}_a${e.surface}${e.cond}`]}`,staticStyle:{"--drag-left":"0","--drag-top":"0"},style:{"--color-index":t.highlights[`${e.id}_a${e.surface}${e.cond}`],"--last-index":t.countPerTrack[`${e.id}_a${e.surface}${e.cond}`]-1,"--drag-left-slo":t.invertedView?1:7,"--drag-top-slo":t.invertedView?7:1},attrs:{id:`${t.type==="tracks"?"Row_Track"+o:""}`,data:`${e.id}_a${e.surface}${e.cond}`},on:{mouseenter:function(n){return t.mouseEnter(n)},mousedown:function(n){return t.dragMouseDown(n,o)},touchstart:function(n){return t.touchstart(n,o)}}},[t.showPoints?t.points&&t.points[e.code]!==void 0&&t.points[e.code]!==null?s("div",{staticClass:"Row_Content",class:{Row_PointsWin:t.points[e.code].v>0,Row_PointsLose:t.points[e.code].v<0,Row_PointsDraw:t.points[e.code].v===0}},[t._v(t._s(t.points[e.code].v))]):t._e():s("div",{staticClass:"Row_Content",attrs:{contenteditable:!(t.type==="tracks"||!t.loggedin||e.text!==""&&e.author!==t.user.username||t.cgOppo&&!t.user||t.forceDisabled||t.isReferencePoints),inputmode:"decimal"},on:{blur:function(n){return t.blur(n,e,o)},click:function(n){return t.click(n,e,o)},keydown:function(n){return t.keydown(n,e,o)}}},[t._v(t._s(t._f("toTimeString")(e.text,e.id))),t.type==="tracks"?s("span",{staticClass:"TdIconCondBox"},[e.textEng.includes("(R)")?s("i",{staticClass:"tdicon-roll Row_TdIconPerk",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"path1"}),s("span",{staticClass:"path2"}),s("span",{staticClass:"path3"}),s("span",{staticClass:"path4"})]):t._e(),e.id==="csSmall"||e.id==="dockCity"||e.id==="csMed"||e.id==="oceanCity"||e.id==="speedbump12km"||e.id==="speedbump1km"||e.id==="desertHill"||e.id==="moto"||e.id==="desertRallyDirt"||e.id==="miStreets2"||e.id==="itBump"||e.id==="dsTnFreeway"||e.id==="dsTnLove"||e.id==="dsTnMile2bump"?s("i",{staticClass:"tdicon-clearance Row_TdIconPerk",attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"path1"}),s("span",{staticClass:"path2"}),s("span",{staticClass:"path3"})]):t._e(),e.trackType!=="00"&&(e.trackType!=="01"||e.id==="figureEight")?s("i",{staticClass:"TdIconCond TdIconCondRel TdIconCondInside",class:`tdicon-${e.trackType}`,attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"path1"}),s("span",{staticClass:"path2"}),s("span",{staticClass:"path3"}),s("span",{staticClass:"path4"}),s("div",{staticClass:"TdIconCondPercGroup"},[s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,0,!0,!0)}},[t._v(t._s(t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,0,!0)))]),s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,1,!0,!0)}},[t._v(t._s(t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,1,!0)))])])]):t._e()]):t._e()]),t.tun||t.cg?[s("div",{staticClass:"Row_Placeholder"},[t._v(t._s(t.placeholder))]),s("div",{staticClass:"Row_PlaceholderTune"},[t._v(t._s(e.name))])]:t._e(),t.type==="tracks"&&t.showCampaignTip?s("div",{staticClass:"Row_Campaign"},[t._v(t._s(e.campaign)),e.campaignNum?s("div",{staticClass:"Row_Campaign_Balls",class:`Row_Campaign_Balls${e.campaignNum}`},t._l(5,function(n){return s("div")}),0):t._e()]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag100_a00"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("mra")(e.text,((((t.car.data||{})[t.tun]||{}).info||{}).acel||{}).t)))]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag150_a00"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("mra")(e.text,((((t.car.data||{})[t.tun]||{}).times||{}).drag100_a00||{}).t)))]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag170_a00"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("mra")(e.text,((((t.car.data||{})[t.tun]||{}).times||{}).drag150_a00||{}).t,25)))]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag100b_a00"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("brake")(e.text,((((t.car.data||{})[t.tun]||{}).times||{}).drag100_a00||{}).t)))]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag100b_a01"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("brake")(e.text,((((t.car.data||{})[t.tun]||{}).times||{}).drag100_a01||{}).t)))]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag100b_a10"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("brake")(e.text,((((t.car.data||{})[t.tun]||{}).times||{}).drag100_a10||{}).t)))]):t._e(),`${e.id}_a${e.surface}${e.cond}`=="drag150b_a00"&&t.type==="times"?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t._f("brake")(e.text,((((t.car.data||{})[t.tun]||{}).times||{}).drag150_a00||{}).t)))]):t._e(),e.text&&t.type==="times"&&t.car.clearance==="Low"&&(e.id==="csSmall"||e.id==="dockCity"||e.id==="csMed"||e.id==="oceanCity"||e.id==="speedbump12km"||e.id==="speedbump1km"||e.id==="desertHill"||e.id==="miStreets2"||e.id==="itBump"||e.id==="dsTnFreeway"||e.id==="dsTnLove"||e.id==="dsTnMile2bump")?s("div",{staticClass:"Row_xRA"},[t._v("low")]):e.text&&t.type==="times"&&(t.car.clearance==="Low"||t.car.clearance==="Mid")&&(e.id==="moto"||e.id==="desertRallyDirt")?s("div",{staticClass:"Row_xRA"},[t._v(t._s(t.$t(`c_${t.car.clearance.toLowerCase()}`).toLowerCase()))]):t._e(),t.type==="tracks"?s("div",{staticClass:"Row_Conditions"},[e.trackType!=="00"&&(e.trackType!=="01"||e.id==="figureEight")?s("i",{staticClass:"TdIconCond TdIconCondRel",class:`tdicon-${e.trackType}`,attrs:{"aria-hidden":"true"}},[s("span",{staticClass:"path1"}),s("span",{staticClass:"path2"}),s("span",{staticClass:"path3"}),s("span",{staticClass:"path4"}),s("div",{staticClass:"TdIconCondPercGroup"},[s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,0,!0,!0)}},[t._v(t._s(t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,0,!0)))]),s("span",{staticClass:"TdIconCondPerc",attrs:{scode:t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,1,!0,!0)}},[t._v(t._s(t._f("trackToPerc")(`${e.id}_a${e.surface}${e.cond}`,1,!0)))])])]):t._e()]):t._e(),t.detailIndex===o&&t.loggedin?s("div",{staticClass:"Row_DetailsOverlay"},[s("div",{staticClass:"Row_LikesBox"},[t.cgOppo?t._e():s("button",{staticClass:"D_Button Row_VoteButton Row_VoteButtonDown",class:{Row_VotedAgainst:e.upList&&e.upList.includes(t.user.username),D_Button_Loading:t.voteLoading},attrs:{title:(e.downList||[]).join(", ")},on:{click:function(n){return t.timevote(n,e,o,"down")}}},[s("i",{staticClass:"Row_VoteIcon",class:`ticon-thumbs_down${e.downList&&e.downList.includes(t.user.username)?"_fill":""}`,attrs:{"aria-hidden":"true"}}),e.downList&&e.downList.length>0?s("span",{staticClass:"Row_DownCount"},[t._v(t._s(e.downList.length))]):t._e()]),t.votedDownIndex===o&&(!t.voteLoading||t.uploadLoading)?[t.alreadyUploaded?s("span",{staticClass:"Row_UploadLabel"},[t._v(t._s(t.$t("m_done"))+"!")]):s("label",{staticClass:"D_Button D_ButtonDark D_ButtonDark2 Row_UploadButton",class:{D_Button_Loading:t.uploadLoading}},[s("input",{staticClass:"Row_UploadInput",attrs:{type:"file",accept:"image/png, image/gif, image/jpeg"},on:{change:function(n){return t.uploadPrint(n,e,o)}}}),s("span",{staticClass:"Row_UploadLabel"},[t._v(t._s(t.$t("m_uploadPrint")))])])]:[t.cgOppo?t._e():s("button",{staticClass:"D_Button Row_VoteButton Row_VoteButtonUp",class:{Row_VotedAgainst:e.downList&&e.downList.includes(t.user.username),D_Button_Loading:t.voteLoading},attrs:{title:(e.upList||[]).join(", ")},on:{click:function(n){return t.timevote(n,e,o,"up")}}},[s("i",{staticClass:"Row_VoteIcon",class:`ticon-thumbs_up${e.upList&&e.upList.includes(t.user.username)?"_fill":""}`,attrs:{"aria-hidden":"true"}}),e.upList&&e.upList.length>0?s("span",{staticClass:"Row_UpCount"},[t._v(t._s(e.upList.length))]):t._e()]),t.user&&t.user.mod&&!t.forceDisabled?s("button",{staticClass:"D_Button Row_ModEditButton",on:{click:function(n){return t.modEdit(n,e,o)}}},[s("i",{staticClass:"ticon-pencil Row_ModEditIcon",attrs:{"aria-hidden":"true"}})]):t._e(),t.user&&t.user.canDelete&&t.tun&&!t.tun.includes("Other")&&t.tun!=="000"?s("button",{staticClass:"D_Button Row_ModEditButton",on:{click:function(n){return t.modDelete(n,e,o)}}},[s("i",{staticClass:"ticon-trash Row_ModTrashIcon",attrs:{"aria-hidden":"true"}})]):t._e()]],2),e.author?s("div",{staticClass:"Row_DetailAuthor"},[t._v(t._s(t.$t("m_by"))+" "+t._s(e.author)),s("span",{staticClass:"Row_DetailDate"},[t._v(t._s(e.date?` • ${e.date}`:""))])]):t._e()]):t._e(),e.downList&&e.downList.length>(e.upList&&e.upList.length>0?e.upList.length:0)?s("div",{staticClass:"Row_CheckDoubtful"},[s("i",{staticClass:"ticon-warning Row_CheckDoubtfulIcon",attrs:{"aria-hidden":"true"}})]):t._e(),t.type==="tracks"?s("div",{staticClass:"RowTrack_DragIndicator"}):t._e()],2):s("div",{staticClass:"Row_Item Row_Cell Row_DisabledCell",on:{mouseenter:function(n){return t.mouseEnter(n)},click:function(n){return n.stopPropagation(),t.outsideClick()}}})}),t.car.isEmpty&&t.type==="times"&&!t.tun?s("div",{staticClass:"Row_EmptyInvite"},[s("div",[t._v(t._s(t.$t("m_noRecords")))])]):t._e(),t.nonUsedTracks.length>0&&!t.cg?s("div",{staticClass:"Row_ShowMoreTracks"},[s("button",{staticClass:"D_Button D_ButtonLink Row_ShowMoreButton",on:{click:function(e){return t.$emit("moreTracks",t.nonUsedTracks)}}},[t._v(t._s(t.$t("m_showOtherTracks")))])]):t._e()],2)},W=[],H=T(O,U,W,!1,null,null);const F=H.exports;export{E as B,F as R,B as a,M as b};
