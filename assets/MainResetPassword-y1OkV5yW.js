import{n as o,b as r,L as i}from"./components-DpxtCXPw.js";const n={name:"MainResetPassword",components:{Logo:i,BaseText:r},props:{test:{type:Boolean,default:!1}},data(){return{password:null,password2:null,input_error:!1,finished:!1,loading:!1}},watch:{},beforeMount(){},mounted(){},computed:{token(){return this.$route.query.token},email(){return this.$route.query.email}},methods:{validate(){if(!this.password||this.password.length<8){this.putError("At least 8 characters please");return}if(this.password!==this.password2){this.putError("They are different");return}this.send()},putError(e){this.$store.commit("DEFINE_SNACK",{error:!0,text:e}),this.input_error=!0,setTimeout(()=>{this.input_error=!1},1500)},send(){this.loading=!0,axios.post(Vue.preUrl+"/confirmNewPassword",{token:this.token,password:this.password,email:this.email}).then(e=>{if(e.data==="OK")this.finished=!0;else throw new Error}).catch(e=>{console.log(e),this.$store.commit("DEFINE_SNACK",{active:!0,error:!0,text:e,type:"error"})}).then(()=>{this.loading=!1})}}};var l=function(){var t=this,s=t._self._c;return s("div",{staticClass:"TTT_Layout"},[t.finished?s("div",{staticClass:"TTT_Finished"},[s("div",{staticClass:"TTT_FinishedText"},[t._v(t._s(t.$t("m_done"))+"!")]),s("router-link",{staticClass:"D_Link D_LinkPlus Space_Top",staticStyle:{"font-size":"14px"},attrs:{to:{name:"Records"}}},[t._v(t._s(t.$t("m_backHome")))])],1):s("div",{staticClass:"TTT_Box"},[t.token?s("div",{staticClass:"TTT_Mid"},[s("BaseText",{staticClass:"Space_Bottom",staticStyle:{display:"none"},attrs:{value:t.email,autocomplete:"new-email",type:"normal",label:"Email",placeholder:""}}),s("BaseText",{staticClass:"Space_Bottom",attrs:{intype:"password",type:"normal",label:t.$t("m_newPassword"),placeholder:""},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}}),s("BaseText",{staticClass:"Space_Bottom",attrs:{intype:"password",type:"normal",label:t.$t("m_repeat"),placeholder:""},model:{value:t.password2,callback:function(a){t.password2=a},expression:"password2"}})],1):s("div",{staticClass:"TTT_Mid"},[t._v(t._s(t.$t("p_somethingWrong")))]),s("div",{staticClass:"TTT_Bottom"},[t.token?s("button",{staticClass:"D_Button D_ButtonDark TTT_Button",class:{D_Button_Loading:t.loading,D_Button_Error:t.input_error},attrs:{disabled:t.loading||t.input_error},on:{click:function(a){return t.validate()}}},[t._v(t._s(t.$t("m_send")))]):t._e(),s("router-link",{staticClass:"D_Link Space_Top",staticStyle:{"font-size":"14px"},attrs:{to:{name:"Records"}}},[t._v(t._s(t.$t("m_cancel")))])],1)])])},d=[],c=o(n,l,d,!1,null,null);const _=c.exports;export{_ as default};
