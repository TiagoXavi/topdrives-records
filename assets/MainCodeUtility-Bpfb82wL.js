import{n as g,o as h,b as M,_ as b}from"./components-DpxtCXPw.js";import{a as u}from"./index-C8gjSc4W.js";const f={name:"MainCodeUtility",components:{BaseText:M,BaseCardGallery:h},props:{test:{type:Boolean,default:!1}},data(){return{textModel:"",carsUuids:[],result:{},tempEventSync:{},challenges:{},buttons:[],clubTDRDays:{},localCriteriaIds:{},localTracksetsIds:{},localUUIDtoName:{},clubHutchHistory:[],clubHutchHistoryFormated:{},letResolvedCriterias:{},letResolvedTracksets:{},clubsParsedResult:{},possiblesResult:[],cars_final:u,roundNumber:null,images:[],currentIndex:-1}},watch:{},beforeMount(){this.result={},setTimeout(()=>{for(const t of document.getElementsByClassName("editable-not-editable"))t.setAttribute("contenteditable",!0),t.spellcheck=!1,t.oncut=()=>!1,t.onpaste=()=>!1,t.onkeydown=e=>{e.metaKey||e.ctrlKey||e.preventDefault()}},100),this.loadClubs()},mounted(){window.addEventListener("paste",this.handlePaste),window.addEventListener("keyup",this.handleKeyUp)},beforeDestroy(){window.removeEventListener("paste",this.handlePaste),window.removeEventListener("keyup",this.handleKeyUp)},computed:{},methods:{handleKeyUp(t){this.images.length!==0&&(t.shiftKey||t.ctrlKey||t.metaKey||(t.code==="KeyP"||t.code==="KeyC")&&this.sharePrint(t.code))},handlePaste(t){t.preventDefault();for(const e of t.clipboardData.files)if(e.type.startsWith("image/")){const a=URL.createObjectURL(e);this.images.push(a)}},intercept(t){let e=t.clipboardData.getData("text");e.length===36?this.result=e:this.result=JSON.parse(e),this.result.resultData&&this.resolveRaces(),this.result.tieredPrizes&&this.resolveEvents(),this.result.ladders&&this.resolveLadders(),this.result.ladder&&this.resolveLadderInner(),this.result.Message&&this.resolveClubs(),this.result.playerDeck&&this.resolvePlayerDeck(),typeof this.result=="string"&&this.result.length===36&&this.lookUuid(),setTimeout(()=>{t.srcElement.value=""},10)},interceptUuid(t){var e=new RegExp(/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/g);let a=t.clipboardData.getData("text");this.carsUuids=a.match(e),setTimeout(()=>{t.srcElement.value=""},10)},resolveRaces(){this.result.resultData.roundData.map((t,e)=>{this.resolveCar(t)})},resolveCar(t){Array.from(Array(2)).map((e,a)=>{let s=a===0?"opponentData":"playerData",r=t[s].id,o=r.slice(0,36),i=this.cars_final.find(c=>c.guid===o);if(!i)return;i=JSON.parse(JSON.stringify(i)),i.class==="S"||i.class;let n=`${r[36]*r[38]/3}${r[40]*r[42]/3}${r[44]*r[46]/3}`;n.length>3&&(n="Other"),i.selectedTune=n,i.photo=Vue.carPhoto(i),i.color=Vue.resolveClass(i.rq,i.class,"color"),t[s].car=i})},resolveEvents(){let t=new Date,e=new Date;e.setDate(e.getDate()-2);let a;this.result.events.map(r=>{a=new Date(r.startDateTime),a>t&&(r.startDateTime=e.toISOString()),new Date(r.endDateTime)>t&&(r.endDateTime=r.endDateTime.replace("21:00:00.000Z","21:05:00.000Z"))}),this.result.eventPlayerData.map(r=>{r.bucketDataVersion=64});let s=document.querySelector(".for_copy");s.style.display="block",s.setAttribute("contenteditable",!0);try{navigator.clipboard.writeText(JSON.stringify(this.result))}catch{console.log("Can't copy")}},resolveLadders(){let t=new Date,e=new Date;e.setDate(e.getDate()-2);let a;this.result.ladders.map(r=>{r.requirePrizeCard=!1,r.rqMin=150,r.rqMax=500,r.hideOnCompletion=!1,a=new Date(r.startDateTime),a>t&&(r.startDateTime=e.toISOString())});let s=document.querySelector(".for_copy");s.style.display="block",s.setAttribute("contenteditable",!0),s.innerText=t.toISOString();try{navigator.clipboard.writeText(JSON.stringify(this.result))}catch{console.log("Can't copy")}this.challenges=this.result},resolveLadderInner(){let t=new Date,e=new Date;e.setDate(e.getDate()-2),this.result.ladder.startDateTime=e.toISOString(),this.result.ladder.inventoryItemAmount=0;let a={userId:"b940b9fa-490c-42cb-9ca8-edee1ff9dbe3",ladderId:this.result.ladder.id,numTickets:5,lastTicketRegen:"2023-08-13T23:46:33.370Z",currentRung:Number(this.roundNumber)||this.result.ladder.rungEligibility.length-1,starsWon:0,entryCostPaid:!0,rungEntryCostPaid:!1,rungs:[]};this.result.ladder.rungEligibility.map(r=>{r.inventoryItemRequirement=null,r.inventoryItemAmount=0,r.inventoryItemConsumed=!1,a.rungs.push({numWins:0,entryCostPaid:!1,starsWon:3})}),a.rungs.pop(),this.result.ladderPlayerData=a;let s=document.querySelector(".for_copy");s.style.display="block",s.setAttribute("contenteditable",!0),s.innerText=t.toISOString();try{navigator.clipboard.writeText(JSON.stringify(this.result))}catch{console.log("Can't copy")}this.challenges=this.result},createLadderDetail(t){let e=new Date,a=document.querySelector(".for_copy");a.style.display="block",a.setAttribute("contenteditable",!0),this.challenges||(a.innerText="No challenge");let s={};s.ladder=this.challenges.ladders.find(r=>r.id===t),s.ladder.description="-",s.ladder.bossStartQuote="-",s.ladder.bossEndQuote="-",s.ladder.packId="152fb12f-a1e8-422e-b631-6db195fcc5e0",s.ladder.bonusPointRequirement=null,s.ladder.bonusPointMultiplier=null,s.ladder.version=1,s.ladder.cardPackType=1,s.ladder.bonusPointFlexibleCriteriaId=null,s.ladder.challengeSetIds=["95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73","95b020ba-4250-4c9d-86a3-a1348bc57a73"],s.ladder.opponents=[{cardRecordId:"f8c96640-2be6-41f4-9d9a-858bea473af5",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"e9279901-0703-47ad-812f-cb8309e56ec8",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"e17d946e-ffcb-46b1-bcad-0680b12ffd4f",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"41145c6d-14e5-4dc5-8980-bd21acc305a2",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"29130ad4-032d-4634-a4f2-2c0970a08f93",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"17e67a49-e7c5-498c-b95b-3e0c8fa24bd9",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"80400286-ed80-4a30-a436-25da5ad60e4c",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"dfffdf4d-732b-4b76-ba59-327690c0619c",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"87bc06f6-d97c-4d8e-a42c-236f14884295",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"94dde6f6-49f7-4ffa-89eb-c717c8bcb814",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"e07ea2f9-754b-40f6-ae90-4bd646fe50a8",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"615535d1-dbea-4711-b248-151881efc871",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"ecece41d-daee-4f22-a407-4e334e860a58",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"76c9cfd6-587c-4993-96b2-07f838d069de",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"ff4a21cf-2300-4e0a-ab6e-b460c2c10fbc",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"b2751ef4-7572-4e7a-8f54-502c3b626f06",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"4cd4da25-1781-47d5-81c3-a96a5633cbec",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"a1e7c05b-7413-4c78-b575-96f8f777cdae",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"4eea3f55-66b7-4493-907e-d4b518cb80b6",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"56ce5e98-a952-4927-9798-71387ca218fc",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"ac09f97e-d91a-45ee-bdd7-16f6c4ff7ac1",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"e6a15e99-1be0-4fd8-9dd4-0bdead8324d6",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"6c27befa-6ff0-4fa5-a663-dfd6805afdbb",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"6ba777f3-9511-4b69-8ec5-a90074bb4868",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"c89229e2-9045-4038-8590-03a3c11effc1",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"c6b0f36b-78c8-4c94-9390-e6da9df95081",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"66bbc918-fe9d-43fb-a160-60d33f120a7e",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"d42ee070-d2a6-4474-aced-06d4567d250f",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"e768c99d-6fa2-4d6e-b7ab-5acf5b20a34d",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"e8a55c43-a691-4a2f-a7e1-c670aa9e5b50",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"f91e6130-1bf9-455d-9a50-c88e89c03bb7",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"30322078-19ef-4339-b9eb-01e88aa02b1a",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"5d6ae3e7-1416-4ce2-8c1a-86e723303498",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"f22b2e24-d618-4ea6-91c3-81847dfb4c13",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"ced2e646-bfaf-48ea-afcf-ddea9c31b080",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"da91076c-7643-4410-b614-97ddc2a53b05",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"68b6a461-ade3-4638-8e2d-51662e36edc5",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"34d135c2-155a-4703-adf2-b2a3640089a2",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"c9738067-171b-4e52-aac4-ccdf19d57fd2",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"21ee88db-bc56-4850-abae-0ce9e25aa819",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"ddba2859-0e51-49f7-abd8-a32fa29f3730",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"85276b5b-0eab-44f6-adef-ceb942ac737c",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"34af2152-7e5e-466a-b2da-495a944f719c",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"52a19e3a-8c3e-41a7-a77e-452fa93213d6",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"7dde4d56-02f9-4f12-b8d2-0285664fb96c",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"3b18399f-b28b-481c-82d1-282af2d1bf4e",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:2,weightMinor:3,chassisMajor:2,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"89d17ea1-5639-46d0-a517-e36557b1fbcd",cardId:"03864f85-ecbe-49cd-a088-296cd704255f",engineMajor:1,engineMinor:0,weightMajor:1,weightMinor:0,chassisMajor:1,chassisMinor:0,gearingMajor:1,gearingMinor:0},{cardRecordId:"e2ffb1c5-35ee-4ce8-af1a-63ace28d1d41",cardId:"b6b3f0fe-3d95-4628-951b-5b46656a6fd6",engineMajor:1,engineMinor:3,weightMajor:1,weightMinor:3,chassisMajor:1,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"c05b89ee-88ea-402c-909f-44589f08d9fd",cardId:"749f0cb1-c777-4396-b131-4565ce3500e6",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0},{cardRecordId:"63ffad15-38db-40e6-81a2-869e305293bc",cardId:"70ae25a0-b855-437e-8285-ab53eaceb0b8",engineMajor:2,engineMinor:3,weightMajor:3,weightMinor:3,chassisMajor:3,chassisMinor:3,gearingMajor:1,gearingMinor:0}],s.ladderPlayerData=null,s={},a.innerText=e.toISOString();try{navigator.clipboard.writeText(JSON.stringify(s))}catch{console.log("Can't copy")}},copyNonce(){try{navigator.clipboard.writeText("c1837fe5-d320-45a7-8d45-67cd87f0f11c")}catch{console.log("Can't copy")}},resolveClubs(){try{this.result.Message.season.customData=JSON.parse(this.result.Message.season.customData),this.result.Message.nextSeason&&(this.result.Message.nextSeason.customData=JSON.parse(this.result.Message.nextSeason.customData))}catch(t){console.log(t)}this.resolveClubSeason(this.result.Message.season),this.result.Message.nextSeason&&this.resolveClubSeason(this.result.Message.nextSeason)},resolveClubSeason(t){let e=new Date(t.startDateTime),a=e.toISOString().substring(0,10);e.setDate(e.getDate()+1);let s=e.toISOString().substring(0,10);this.clubsParsedResult[a]={},this.clubsParsedResult[s]={},t.customData.criteriaSets.map((r,o)=>{let i=o===0?this.clubsParsedResult[a]:this.clubsParsedResult[s];i.criterias={},r.map(n=>{i.criterias[n]=this.localUUIDtoName[n]||"-",this.localUUIDtoName[n]||this.lookUuid(n)})}),t.customData.trackSets.map((r,o)=>{let i=o===0?this.clubsParsedResult[a]:this.clubsParsedResult[s];i.tracksets={},r.map(n=>{i.tracksets[n]=this.localUUIDtoName[n]||"-",this.localUUIDtoName[n]||this.lookUuid(n)})})},loadClubs(){axios.get(Vue.preUrl+"/searchClubs").then(t=>{t.data.res&&(this.clubTDRDays=t.data.res.find(e=>e.id==="clubsDaysObj").value,Object.keys(this.clubTDRDays).map(e=>{}),this.loadClubsPredict())}).catch(t=>{}).then(t=>{})},loadClubsPredict(){axios.get(Vue.preUrl+"/clubsPredict").then(t=>{this.clubHutchHistory=t.data.value,this.afterLoadClubs()}).catch(t=>{}).then(t=>{})},afterLoadClubs(){this.clubHutchHistory.map(e=>{let a=new Date(e.startDateTime),s=a.toISOString().substring(0,10);a.setDate(a.getDate()+1);let r=a.toISOString().substring(0,10);this.clubHutchHistoryFormated[s]={criterias:e.customData.criteriaSets[0],tracksetGroups:e.customData.trackSets[0]},this.clubHutchHistoryFormated[r]={criterias:e.customData.criteriaSets[1],tracksetGroups:e.customData.trackSets[1]}}),Object.keys(this.clubTDRDays).map(e=>{this.clubHutchHistoryFormated[e]&&(this.clubTDRDays[e].criterias.length===3&&this.checkMatchesClubs(this.clubTDRDays[e].criterias,"localCriteriaIds",e),this.clubTDRDays[e].tracksetGroups.length===3&&this.checkMatchesClubs(this.clubTDRDays[e].tracksetGroups,"localTracksetsIds",e))}),this.fillUUIDCollection(this.localCriteriaIds),this.fillUUIDCollection(this.localTracksetsIds),console.log("___"),this.clearLocalUUIDPossibles(this.localCriteriaIds),this.clearLocalUUIDPossibles(this.localCriteriaIds),this.clearLocalUUIDPossibles(this.localCriteriaIds),this.clearLocalUUIDPossibles(this.localTracksetsIds),this.clearLocalUUIDPossibles(this.localTracksetsIds),this.clearLocalUUIDPossibles(this.localTracksetsIds),console.log("___ LIST OF KNOWN:");let t=[];Object.keys(this.localUUIDtoName).map(e=>{t.push(this.localUUIDtoName[e])}),console.log(t),console.log("___"),this.checkIfMatchesWithoutConclusion(this.localCriteriaIds),this.checkIfMatchesWithoutConclusion(this.localTracksetsIds),console.log("___ LIST OF UNKNOWN:"),this.checkIfUnknown(this.localCriteriaIds),this.checkIfUnknown(this.localTracksetsIds)},checkMatchesClubs(t,e,a){let s=this[e],r="criterias";e==="localTracksetsIds"&&(r="tracksetGroups"),t.map(o=>{if(s[o]||(s[o]={}),s[o].possibles){let i=!1;s[o].possibles.map(n=>{this.clubHutchHistoryFormated[a][r].map(c=>{n===c&&(i=!0,s[o].matches||(s[o].matches=[]),s[o].matches.push(n))})}),i||(s[o].possibles=[...s[o].possibles,...this.clubHutchHistoryFormated[a][r]])}else s[o].possibles=this.clubHutchHistoryFormated[a][r]})},fillUUIDCollection(t){Object.keys(t).map(e=>{if(t[e].matches){let a={},s,r=0;t[e].matches.map(i=>{a[i]||(a[i]=0),a[i]+=1,s?a[i]>r&&(s=i,r=a[i]):(s=i,r=a[i])});let o=!1;{let i=[];Object.keys(a).map(n=>{i.push(a[n])}),i.sort(),i.reverse(),i.length>1&&i[0]===i[1]&&(o=!0)}o||(this.localUUIDtoName[s]=e)}})},clearLocalUUIDPossibles(t){Object.keys(t).map(e=>{if(t[e].possibles=t[e].possibles.filter(a=>!(this.localUUIDtoName[a]&&this.localUUIDtoName[a]!=e)),t[e].matches&&(t[e].matches=t[e].matches.filter(a=>!(this.localUUIDtoName[a]&&this.localUUIDtoName[a]!=e))),t[e].possibles.length===1){if(!this.localUUIDtoName[t[e].possibles[0]])this.localUUIDtoName[t[e].possibles[0]]=e;else if(this.localUUIDtoName[t[e].possibles[0]]!==e)debugger}else if(t[e].matches&&[...new Set(t[e].matches)].length===1){if(!this.localUUIDtoName[t[e].matches[0]])this.localUUIDtoName[t[e].matches[0]]=e;else if(this.localUUIDtoName[t[e].matches[0]]!==e)debugger}})},checkIfMatchesWithoutConclusion(t){Object.keys(t).map(e=>{t[e].matches&&(t[e].matches=[...new Set(t[e].matches)],t[e].matches.length>1&&console.log(e,"with",t[e].matches.length,"possibles"))})},checkIfUnknown(t){let e=[];Object.keys(t).map(a=>{t[a].possibles.length>1&&e.push(a)}),console.log(e)},lookUuid(t){t||(t=this.result);let e=[];this.lookPossiblesByUuid(this.localCriteriaIds,t,e),this.lookPossiblesByUuid(this.localTracksetsIds,t,e),this.possiblesResult.push({names:e,uuid:t})},lookPossiblesByUuid(t,e,a){Object.keys(t).map(s=>{t[s].possibles.includes(e)&&a.push(s)})},resolvePlayerDeck(){let t=["1f299953-b8ed-4cc0-90d6-5a0595c8695a"];this.result.playerDeck.map(e=>{if(t.length>0){let a=t.shift();e.cardId=a,e.engineMajor=2,e.engineMinor=3,e.weightMajor=3,e.weightMinor=3,e.chassisMajor=3,e.chassisMinor=3}}),this.result.user.eloScore=5e3,this.result.user.softCurrency1=1e5,this.result.user.hardCurrency1=1e5,navigator.clipboard.writeText(JSON.stringify(this.result,null,4))},sharePrint(t){this.tempWindowWidth=this.windowWidth,this.windowWidth=1300,this.pngLoading=!0,window.scrollTo({top:0});let e,a,s=document.querySelector("#App_PrintContainer"),r=document.querySelector("#printCanvas"),o=".MainCollageMaker_Grid",i=document.querySelector(o);i.classList.add("Main_BodyPrint"),e=i.clientWidth*2,a=i.clientHeight*2;let n={backgroundColor:"#333",canvas:r,scale:2,width:e,height:a,windowWidth:e,windowHeight:a};r.setAttribute("width",`${e}`),r.setAttribute("height",`${a}`),setTimeout(()=>{this.runSharePrint(i,n,s,r,o,t)},10)},runSharePrint(t,e,a,s,r,o){let i=this;b(()=>import("./html2canvas.esm-CBrSDip1.js"),[]).then(n=>{n.default(t,e).then(function(c){window.ReImg?i.afterRunSharePrint(a,s,r,o):(window.importReimg(),window.importReimgPromise.then(l=>{i.afterRunSharePrint(a,s,r,o)}))})}).catch(n=>{console.log("load html2canvas failed",n)})},afterRunSharePrint(t,e,a,s){let r=this,o=window.ReImg.fromCanvas(e);if(s==="KeyP")o.downloadPng(`TDR_${new Date().toISOString().slice(0,-5)}.png`),document.querySelector(a).classList.remove("Main_BodyPrint"),r.windowWidth=r.tempWindowWidth,r.pngLoading=!1;else{var i=new Image;i.src=o.toBase64(),i.onload=function(){var n=document.createElement("canvas"),c=n.getContext("2d");n.width=i.naturalWidth,n.height=i.naturalHeight,c.drawImage(i,0,0),n.toBlob(function(l){try{navigator.clipboard.write([new ClipboardItem({"image/png":l})]),r.$store.commit("DEFINE_SNACK",{active:!0,correct:!0,text:"Copied",time:1e3})}catch(d){console.error(d)}},"image/png",1)}}},askDelete(t){this.currentIndex===t?(this.currentIndex=-1,this.images=this.images.filter((e,a)=>a!==t)):(this.currentIndex=t,setTimeout(()=>{this.currentIndex=-1},1e3))},collageRightClick(t){t!==0&&this.images.splice(t-1,0,this.images.splice(t,1)[0])}}};var p=function(){var e=this,a=e._self._c;return a("div",{staticClass:"MainCodeUtility_Layout"},[a("div",{staticClass:"inputs_layout"},[a("BaseText",{staticClass:"Space_Bottom",attrs:{type:"normal",placeholder:"paste here"},on:{paste:function(s){return e.intercept(s)}},model:{value:e.textModel,callback:function(s){e.textModel=s},expression:"textModel"}})],1),e.result&&e.result.resultData?a("div",[a("div",{staticClass:"round_layout"},[a("div",{staticClass:"round_boxes"},e._l(e.result.resultData.roundScores,function(s,r){return a("div",{staticClass:"round_boxesItem"},[a("div",{staticClass:"MainCodeUtility_CardBox"},[a("BaseCardGallery",{staticClass:"MainCodeUtility_GalleryCard",attrs:{car:e.result.resultData.roundData[r].opponentData.car,options:!1,tuneText:e.result.resultData.roundData[r].opponentData.car.selectedTune}})],1),e.result.resultData.roundData[r].playerData.distance<2546||e.result.resultData.roundData[r].playerData.distance>2548.7?[a("div",{staticClass:"round_boxesThey",class:{round_suspect:/\.\d\d95$/.test(`${e.result.resultData.roundData[r].opponentData.time}`)}},[e.result.resultData.roundData[r].opponentData.result==="Finished"?a("span",[e._v(e._s(e.result.resultData.roundData[r].opponentData.time.toHHMMSS()))]):a("span",{staticClass:"round_boxesPointRed"},[e._v("DNF")])])]:[a("div",{staticClass:"round_boxesThey"},[a("span",[e._v(e._s(e.result.resultData.roundData[r].opponentData.speed.toTestBowl()))])])],a("div",{staticStyle:{width:"100%","min-height":"1px","background-color":"#ffffff44","margin-top":"10px"}}),a("div",{staticClass:"round_boxesPoint",class:`round_boxesPoint${s>0?"Green":s<0?"Red":"Grey"}`},[e._v(e._s(s))]),a("div",{staticClass:"MainCodeUtility_CardBox"},[a("BaseCardGallery",{staticClass:"MainCodeUtility_GalleryCard",attrs:{car:e.result.resultData.roundData[r].playerData.car,options:!1,tuneText:e.result.resultData.roundData[r].playerData.car.selectedTune}})],1),e.result.resultData.roundData[r].playerData.distance<2546||e.result.resultData.roundData[r].playerData.distance>2548.7?[a("div",{staticClass:"round_boxesYou",class:{round_suspect:/\.\d\d95$/.test(`${e.result.resultData.roundData[r].playerData.time}`)}},[e.result.resultData.roundData[r].playerData.result==="Finished"?a("span",[e._v(e._s(e.result.resultData.roundData[r].playerData.time.toHHMMSS()))]):a("span",{staticClass:"round_boxesPointRed"},[e._v("DNF")])])]:[a("div",{staticClass:"round_boxesYou"},[a("span",[e._v(e._s(e.result.resultData.roundData[r].playerData.speed.toTestBowl()))])])]],2)}),0),a("div",{staticClass:"round_scores"},[a("div",{staticClass:"resul_Stars"},[e.result.prizeBoard&&e.result.resultData.playerScore-e.result.resultData.opponentScore>=e.result.prizeBoard.starPoints[2]?a("span",{staticClass:"starYou"},[e._v("★★★")]):e.result.prizeBoard&&e.result.resultData.playerScore-e.result.resultData.opponentScore>=e.result.prizeBoard.starPoints[1]?a("span",{staticClass:"starYou"},[e._v("★★☆")]):e.result.prizeBoard&&e.result.resultData.playerScore-e.result.resultData.opponentScore>e.result.prizeBoard.starPoints[0]?a("span",{staticClass:"starYou"},[e._v("★☆☆")]):a("span",{staticClass:"starYou",staticStyle:{color:"#5c5c5c"}},[e._v("☆☆☆")])]),a("span",{staticClass:"round_scoresYou"},[e._v(e._s(e.result.resultData.playerScore))]),a("span",{staticClass:"round_scoresX"},[e._v("x")]),a("span",{staticClass:"round_scoresThey"},[e._v(e._s(e.result.resultData.opponentScore))])])])]):e._e(),e._m(0),a("div",{staticClass:"buttons_Layout"},e._l(e.buttons,function(s){return a("button",{on:{click:function(r){return e.createLadderDetail(s.id)}}},[e._v(e._s(s.name))])}),0),a("div",{staticClass:"MainCodeUtility_ClubsResult"},e._l(e.clubsParsedResult,function(s,r){return a("div",{staticClass:"MainCodeUtility_ClubsDayBox"},[a("div",{staticClass:"MainCodeUtility_Day"},[e._v(e._s(r))]),a("div",{staticClass:"MainCodeUtility_ClubList"},[a("div",{staticClass:"MainCodeUtility_ClubListTitle"},[e._v("Tracksets")]),a("div",{staticClass:"MainCodeUtility_ClubListBox"},e._l(s.tracksets,function(o,i){return a("div",{staticClass:"MainCodeUtility_ClubListBoxItem"},[a("div",[e._v(e._s(o)+" "),a("span",{staticClass:"MainCodeUtility_ClubListSub"},[e._v(e._s(i))])])])}),0)]),a("div",{staticClass:"MainCodeUtility_ClubList"},[a("div",{staticClass:"MainCodeUtility_ClubListTitle"},[e._v("Criterias")]),a("div",{staticClass:"MainCodeUtility_ClubListBox"},e._l(s.criterias,function(o,i){return a("div",{staticClass:"MainCodeUtility_ClubListBoxItem"},[a("div",[e._v(e._s(o)+" "),a("span",{staticClass:"MainCodeUtility_ClubListSub"},[e._v(e._s(i))])])])}),0)])])}),0),e.possiblesResult.length>0?a("div",{staticClass:"MainCodeUtility_ClubsResult"},e._l(e.possiblesResult,function(s){return a("div",{staticClass:"MainCodeUtility_"},[a("div",{staticClass:"MainCodeUtility_Day"},[e._v(e._s(s.uuid))]),a("div",{staticClass:"MainCodeUtility_ClubListBox"},e._l(s.names,function(r){return a("div",{staticClass:"MainCodeUtility_ClubListBoxItem"},[a("div",[e._v(e._s(r))])])}),0)])}),0):e._e(),a("div",{staticClass:"MainCollageMaker_Layout"},[a("div",{staticClass:"MainCollageMaker_Grid"},e._l(e.images,function(s,r){return a("div",{staticClass:"MainCollageMaker_Div",on:{click:function(o){return e.askDelete(r)},contextmenu:function(o){return e.collageRightClick(r)}}},[a("img",{staticClass:"MainCollageMaker_Img",attrs:{src:s,loading:"lazy",alt:""}})])}),0)])])},m=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"for_copy"},[e("div",{staticClass:"editable-not-editable"})])}],I=g(f,p,m,!1,null,"14942852");const w=I.exports;export{w as default};
