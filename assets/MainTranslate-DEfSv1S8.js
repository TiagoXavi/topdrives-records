import{n as u,B as m,b as d,L as g,h as p,l as h}from"./index-BR-PFC2m.js";import{c as f}from"./campaign-Dapxa4yk.js";const v={name:"MainTranslate",components:{BaseText:p,Logo:g,BaseDialog:d,BaseFlag:m},props:{test:{type:Boolean,default:!1}},data(){return{english:h,campaign:f,translateObj:{language:null},first:["m_campaign","p_userSentCgForAnalyse","g_joinDiscord","s_dry","c_topSpeed","t_drag100b"],campaignObj:{},tips:{m_vChanges:"you need to use the {version}",m_charLeast:"you need to use the {n}",p_modDoingRound:"you need to use the {mod}",p_patronsOnly:"you need to use the {tier}",s_dry:"max 5 characters",s_aspht:"max 5 characters",s_wet:"max 5 characters",s_dirt:"max 5 characters",s_gravel:"max 5 characters",s_ice:"max 5 characters",s_sand:"max 5 characters",s_snow:"max 5 characters",s_grass:"max 5 characters",m_win:"max 5 characters",m_lose:"max 5 characters",m_draw:"max 5 characters",m_notime:"max 8 characters",m_select:"max 8 characters",c_mid:"ground clearance of cars",c_low:"ground clearance of cars",c_high:"ground clearance of cars",c_performance:"Tyre",c_standard:"Tyre","c_all-surface":"Tyre","c_off-road":"Tyre",c_slick:"Tyre",c_frontEngine:"engine position",c_midEngine:"engine position","c_mid-rearEngine":"engine position",c_mixedEngine:"engine position",c_rearEngine:"engine position",c_petrol:"fuel",c_diesel:"fuel",c_electric:"fuel",c_hybrid:"fuel",c_bioethanol:"fuel",c_hydrogen:"fuel",c_misc:"fuel"},confirmDelete:{dialog:!1,msg:"Reset all your work?",actionLabel:"Reset",action:null,loading:!1,classe:""},langs:[]}},watch:{},beforeMount(){let s=this,a=window.localStorage.getItem("translateObj");a&&(a=JSON.parse(a),this.translateObj=a),s.langs=[],Object.keys(this.$i18n._vm.messages).forEach(t=>{s.langs.push(t)}),this.campaignLocation()},mounted(){},computed:{},methods:{blur(){window.localStorage.setItem("translateObj",JSON.stringify(this.translateObj))},reset(){let s=this,a=function(){s.translateObj={language:null},s.blur(),s.confirmDelete.dialog=!1};this.confirmDelete={dialog:!0,msg:"Reset all your work?",actionLabel:"Reset",action:a,loading:!1,classe:"D_ButtonRed"}},download(){let s=this.translateObj.language||"lang";s=s.trim().toLowerCase().replace(/  +/g," ").normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");let a=`${s}_TDR.json`,t=JSON.parse(JSON.stringify(this.translateObj));Object.keys(this.english).forEach(n=>{t[n]||(t[n]=null)});const i=JSON.stringify(t,null,"  ");let e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),e.setAttribute("download",a),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.exportLoading=!1},isOnlyLowerCase(s){return!/[A-Z]/.test(s)},campaignLocation(){let s=[],a=[];Object.keys(this.english).forEach(t=>{t.startsWith("t_")&&a.push(t.substr(2))}),a.map((t,i)=>{let e=[];this.campaign.map((n,l)=>{n.matches.map((o,r)=>{o.races.map((c,_)=>{c.name.slice(0,-4)===t&&e.push({city:n.name,icity:l,imatch:r,irace:_,code:`${l}${r}`})})})}),s.push(e)}),a.map((t,i)=>{let e;s[i].map(n=>{(!e||this.isChamp(e.city)&&!this.isChamp(n.city)||n.irace<e.irace&&!this.isChamp(n.city)||n.irace<=e.irace&&n.icity>e.icity||n.irace<=e.irace&&n.imatch>e.imatch)&&(e=n)}),e?this.campaignObj[`t_${t}`]=`${e.city} ${e.imatch+1}, Race ${e.irace+1}`:this.campaignObj[`t_${t}`]=""})},isChamp(s){return s.startsWith("SN")||s.startsWith("YB")},load(s){let a=s.target.files[0],t=new FileReader;t.onload=this.onload,t.readAsText(a)},onload(s){let a=s.target.result,t=JSON.parse(a);this.translateObj=t},copy(){let s=JSON.parse(JSON.stringify(this.translateObj));Object.keys(this.english).forEach(a=>{s[a]||(s[a]=null)}),navigator.clipboard.writeText(JSON.stringify(s))},loadSystemLanguage(s){let a=this.$i18n._vm.messages[s];this.translateObj=a}}};var b=function(){var a=this,t=a._self._c;return t("div",{staticClass:"MainTranslate_Layout"},[t("div",{staticClass:"MainTranslate_Box"},[t("div",{staticClass:"MainTranslate_Header"},[t("div",{staticClass:"MainTranslate_HeaderTitle"},[a._v("Translation tool")]),a._m(0),t("div",{staticClass:"MainTranslate_FooterMessage",staticStyle:{"margin-bottom":"5px"}},[a._v("Review a done language:")]),t("div",{staticClass:"MainTranslate_FooterButtons",staticStyle:{"margin-bottom":"40px"}},a._l(a.langs,function(i,e){return t("button",{staticClass:"D_Button D_ButtonDark D_ButtonDark2",on:{click:function(n){return a.loadSystemLanguage(i)}}},[t("BaseFlag",{staticClass:"MainTranslate_FooterFlag",attrs:{flag:i.toUpperCase()}}),t("span",[a._v(a._s(i.toUpperCase()))])],1)}),0),t("div",{staticClass:"MainTranslate_Bottom"},[t("div",{staticClass:"MainTranslate_Left"},[a._v("Language name")]),t("div",{staticClass:"MainTranslate_Right"},[t("BaseText",{staticClass:"BaseText_Big MainTranslate_HeaderLanguageNameInput",attrs:{type:"normal",label:""},model:{value:a.translateObj.language,callback:function(i){a.$set(a.translateObj,"language",i)},expression:"translateObj.language"}})],1)])]),t("div"),t("div",{staticClass:"MainTranslate_Body"},a._l(a.english,function(i,e){return t("div",{staticClass:"MainTranslate_Item",class:{MainTranslate_Misc:e.startsWith("m_"),MainTranslate_Phrase:e.startsWith("p_"),MainTranslate_Template:e.startsWith("g_"),MainTranslate_Surface:e.startsWith("s_"),MainTranslate_Car:e.startsWith("c_"),MainTranslate_Track:e.startsWith("t_")}},[a.first.includes(e)?t("div",{staticClass:"MainTranslate_Title"},[e.substr(0,2)==="m_"?[a._v("Misc")]:a._e(),e.substr(0,2)==="p_"?[a._v("Phrases")]:a._e(),e.substr(0,2)==="g_"?[a._v("Template Guidelines")]:a._e(),e.substr(0,2)==="s_"?[a._v("Track surfaces")]:a._e(),e.substr(0,2)==="c_"?[a._v("Relative to cars")]:a._e(),e.substr(0,2)==="t_"?[a._v("Track names")]:a._e()],2):a._e(),t("div",{staticClass:"MainTranslate_Bottom"},[t("div",{staticClass:"MainTranslate_Left"},[a._v(a._s(i))]),t("div",{staticClass:"MainTranslate_Right"},[e.substr(0,2)==="p_"||e.substr(0,2)==="g_"?t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.translateObj[e],expression:"translateObj[key]"}],staticClass:"MainTranslate_Textarea data-hj-allow",attrs:{rows:"6"},domProps:{value:a.translateObj[e]},on:{blur:function(n){return a.blur()},input:function(n){n.target.composing||a.$set(a.translateObj,e,n.target.value)}}}):t("BaseText",{staticClass:"BaseText_Big",attrs:{type:"normal",label:"",placeholder:a.first.includes(e)?"type the translation here...":""},on:{blur:function(n){return a.blur()}},model:{value:a.translateObj[e],callback:function(n){a.$set(a.translateObj,e,n)},expression:"translateObj[key]"}}),i.includes(" | ")?t("div",{staticClass:"MainTranslate_Tip"},[a._v("Singular | Plural")]):e.substr(0,2)==="t_"?t("div",{staticClass:"MainTranslate_Tip"},[a._v(a._s(a.campaignObj[e]))]):a.isOnlyLowerCase(i)?t("div",{staticClass:"MainTranslate_Tip"},[a._v("lowercase")]):t("div",{staticClass:"MainTranslate_Tip"},[a._v(a._s(a.tips[e]))])],1)])])}),0),t("div",{staticClass:"MainTranslate_Footer"},[t("div",{staticClass:"MainTranslate_FooterButtons"},[t("button",{staticClass:"D_Button D_ButtonDark D_ButtonDark2 D_ButtonRed",on:{click:function(i){return a.reset()}}},[a._v("Clear all")]),t("button",{staticClass:"D_Button D_ButtonDark D_ButtonDark2 D_ButtonGreen",on:{click:function(i){return a.download()}}},[a._v("Create translation file")])]),t("div",{staticClass:"MainTranslate_FooterButtons",staticStyle:{"margin-top":"15px"}},[t("label",{staticClass:"D_Button D_ButtonDark D_ButtonDark2"},[t("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:function(i){return a.load(i)}}}),t("span",[a._v("Load a translation file")])]),t("button",{staticClass:"D_Button D_ButtonDark D_ButtonDark2",on:{click:function(i){return a.copy()}}},[a._v("Copy to clipboard")])]),t("div",{staticClass:"MainTranslate_FooterMessage"},[a._v("After creating translation file, send it to me on TDR Discord")]),t("BaseDialog",{attrs:{active:a.confirmDelete.dialog,transparent:!1,lazy:!0,"max-width":"420px","min-width":"240px"},on:{close:function(i){a.confirmDelete.dialog=!1}}},[t("div",{staticStyle:{}},[t("div",{staticClass:"Main_DialogMessage"},[a._v(a._s(a.confirmDelete.msg))]),t("div",{staticClass:"Main_DialogBottom"},[t("button",{staticClass:"D_Button Main_OptionsButton",on:{click:function(i){a.confirmDelete.dialog=!1}}},[t("span",[a._v(a._s(a.$t("m_cancel")))])]),t("button",{staticClass:"D_Button Main_OptionsButton",class:`${a.confirmDelete.loading?"D_Button_Loading ":""}${a.confirmDelete.classe}`,attrs:{disabled:a.confirmDelete.loading},on:{click:a.confirmDelete.action}},[t("span",[a._v(a._s(a.confirmDelete.actionLabel))])])])])])],1)])])},T=[function(){var s=this,a=s._self._c;return a("ol",{staticClass:"MainTranslate_Ol"},[a("li",{staticClass:"MainTranslate_Rule"},[s._v("Follow the letter case the same way as you see on the left, some words are full lowercase or full UPPERCASE.")]),a("li",{staticClass:"MainTranslate_Rule"},[s._v("Keep the track and surfaces names how its in the game. Top Drives probably doesn't has a good translation for your language. Maybe you want to improve, no probem, but don't improve track names. People will not find the track using your translation.")]),a("li",{staticClass:"MainTranslate_Rule"},[s._v("Here on TDR some words has limited space (like small buttons), use your creativity to follow those characters limit when asked.")]),a("li",{staticClass:"MainTranslate_Rule"},[s._v('Some fields has a separator like "Tag | Tags", this is pluralization, you need to keep separator like that.')]),a("li",{staticClass:"MainTranslate_Rule"},[s._v("If some item work better in english, just leave it empty.")]),a("li",{staticClass:"MainTranslate_Rule"},[s._v("Safe to reload this page, your browser will memorize your work.")])])}],C=u(v,b,T,!1,null,null);const O=C.exports;export{O as default};
