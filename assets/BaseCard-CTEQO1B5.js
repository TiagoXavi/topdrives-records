import{n as r}from"./index-BR-PFC2m.js";const i={name:"BaseCard",components:{},props:{car:{type:Object,default(){return{}}},options:{type:Boolean,default:!0},fixBack:{type:Boolean,default:!1},temp:{type:Number,default:1},downloadLoading:{type:Boolean,default:!1},needSave:{type:Boolean,default:!1},isDialogBox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},cgOppo:{type:Boolean,default:!1},hideClose:{type:Boolean,default:!1},showResetTune:{type:Boolean,default:!1},customData:{type:Object,default(){return null}},videoSrc:{type:String,default:null},asGallery:{type:Boolean,default:!1},tuneText:{requred:!1},showCompactOverlay:{type:Boolean,default:!0}},data(){return{timer:null,timerStart:0,touchCount:0,touchedLong:!1,resolveCar:{},carClassColor:"",currentTune:""}},watch:{"car.selectedTune":function(){this.load()},"car.rid":function(){this.load()}},beforeMount(){this.load()},mounted(){},computed:{carClassColorRgb(){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(this.carClassColor);return t?`${parseInt(t[1],16)},${parseInt(t[2],16)},${parseInt(t[3],16)}`:null},carPhoto(){let t=Vue.carPhoto(this.car);return t=t.replaceAll("(","\\(").replaceAll(")","\\)"),t=t.replaceAll("'","\\'"),t?"background-image: url("+t+");":""},carPhotoSrc(){let t=Vue.carPhoto(this.car);return t||""}},methods:{load(){this.car&&this.car.selectedTune&&this.car.selectedTune.startsWith("v")?this.resolveCarMethod():(this.resolveCar=this.car,this.carClassColor=Vue.resolveClass(this.car.rq,this.car.class,"color"))},async resolveCarMethod(){if(this.car&&this.car.selectedTune&&this.car.selectedTune.startsWith("v"))Vue.getOldCar(this.car.rid,this.car.selectedTune.substr(1,2)).then(t=>{this.carClassColor=Vue.resolveClass(t.rq,t.class,"color"),this.resolveCar=t});else return this.car},invertedClick(t){!this.needSave&&t.shiftKey&&this.$emit("delete")},touchstart(t){if(t.preventDefault(),clearTimeout(this.timer),this.timer=setTimeout(this.onlongtouch,600),this.touchCount===0){this.timerStart=performance.now(),this.touchCount=this.touchCount+1;return}performance.now()-this.timerStart<400?this.touchCount=this.touchCount+1:(this.timerStart=performance.now(),this.touchCount=1),this.touchCount>2&&((!this.needSave||this.cgOppo)&&!this.hideClose&&this.$emit("delete"),this.touchCount=0,clearTimeout(this.timer))},touchend(){clearTimeout(this.timer),this.touchedLong&&(this.touchedLong=!1,this.$emit("longTouch"))},onlongtouch(){navigator.vibrate&&navigator.vibrate(30),this.$emit("longTouch")}}};var o=function(){var a=this,e=a._self._c;return e("div",{staticClass:"BaseCard_Layout",class:`${a.isDialogBox?"BaseCard_LayoutDialog":""} BaseCard_Class${a.resolveCar.class} ${a.asGallery?"BaseCard_LayoutAsDialog":""}`,style:`--class-color: ${a.carClassColor}; --class-color-rgb: ${a.carClassColorRgb};`},[a.fixBack?e("div",{staticClass:"BaseCard_FixBack"}):a._e(),a.isDialogBox?e("div",{staticClass:"BaseCard_EffectBackGround"}):a._e(),e("div",{staticClass:"Car_Header",class:{Row_DialogCardCard:a.isDialogBox,Car_Loading:a.downloadLoading,Car_WithVideo:a.videoSrc},style:`${a.carPhoto};`},[a.videoSrc?e("video",{attrs:{autoplay:"",muted:"",loop:"",src:a.videoSrc,"webkit-playsinline":"",playsinline:""},domProps:{muted:!0}}):a._e(),e("div",{staticClass:"Car_HeaderBlockTop"}),e("div",{staticClass:"Car_HeaderBlockYear"},[a._v(a._s(a.car.year||"-"))]),e("div",{staticClass:"Car_HeaderBlockCountry"},[a._v(a._s(a.car.country||"-"))]),e("div",{staticClass:"Car_HeaderBlockTires"},[e("span",{staticClass:"Car_HeaderBlockTiresValue"},[a._v(a._s(a.$t(`c_${(a.resolveCar.tyres||"?").toLowerCase()}`)||"-"))]),e("span",{staticClass:"Car_HeaderBlockTiresLabel"},[a._v(" "+a._s(a.$tc("c_tyre",2)))])]),e("div",{staticClass:"Car_HeaderBlockStars",class:`Car_NumberStars${a.car.selectedTune}`},a._l(3,function(s){return e("i",{staticClass:"ticon-star Car_Star",attrs:{"aria-hidden":"true"}})}),0),a.cgOppo?[a.car.selectedTune&&a.car.selectedTune.includes("Other")&&a.car.selectedTune!=="Other"?e("div",{staticClass:"Car_TuneTip"},[a._v(a._s(a.car.selectedTune.slice(5)))]):e("div",{staticClass:"Car_TuneTip"},[a._v(a._s(a.car.selectedTune))])]:a._e(),a.options?e("div",{staticClass:"Car_HeaderToolsHoverContainer"}):a._e(),a.options?e("div",{staticClass:"Car_HeaderTools"},[a.showResetTune?e("button",{staticClass:"D_Button Car_HeaderButton",on:{click:function(s){return a.$emit("refreshTune")}}},[e("i",{staticClass:"ticon-refresh_3 Car_HeaderIcon",attrs:{"aria-hidden":"true"}})]):a._e(),a.draggable?e("button",{staticClass:"D_Button Car_HeaderButton Car_HeaderDrag",on:{mousedown:function(s){return a.$emit("dragdown",s)}}},[e("i",{staticClass:"ticon-expand Car_HeaderIcon Car_DragIcon",attrs:{"aria-hidden":"true"}})]):a._e(),a.cgOppo?e("button",{staticClass:"D_Button Car_HeaderButton",on:{click:function(s){return a.$emit("cog")}}},[e("i",{staticClass:"ticon-gear Car_HeaderIcon",attrs:{"aria-hidden":"true"}})]):a._e(),(!a.needSave||a.cgOppo)&&!a.hideClose?e("button",{staticClass:"D_Button Car_HeaderButton",on:{click:function(s){return a.$emit("delete")}}},[e("i",{staticClass:"ticon-close_3 Car_HeaderIcon",attrs:{"aria-hidden":"true"}})]):a._e()]):a._e(),e("div",{staticClass:"Car_HeaderToolsBack"}),a.tuneText?e("div",{staticClass:"Car_TuneTipGallery"},[a._v(a._s(a.tuneText))]):a._e(),e("div",{staticClass:"Car_HeaderBlockRQ"},[e("div",{staticClass:"Car_HeaderRQValue",class:{Car_HeaderRQValue3:a.resolveCar&&a.resolveCar.rq>99}},[a._v(a._s(a.resolveCar.rq))]),a._m(0)]),e("div",{staticClass:"Car_HeaderBlockClass"},[e("div",{staticClass:"Car_HeaderClassBack"}),e("div",{staticClass:"Car_HeaderClassValue"},[a._v(a._s(a._f("resolveClass")(this.resolveCar.rq,this.resolveCar.class,"letter")))])]),a.car.prize?e("div",{staticClass:"Car_HeaderBlockPrize",attrs:{title:"Prize car"}},[e("i",{staticClass:"ticon-trophy Car_HeaderTrophy",attrs:{"aria-hidden":"true"}})]):a._e(),e("div",{staticClass:"Car_HeaderBackDropRight"},[e("div",{staticClass:"Car_HeaderRightBlockUnique"},[e("div",{staticClass:"Car_HeaderStatValue"},[a._v(a._s(a._f("resolveStat")(a.car,"topSpeed",a.customData)))]),e("div",{staticClass:"Car_HeaderStatLabel"},[a._v(a._s(a.$t("c_topSpeed").toUpperCase()))])]),e("div",{staticClass:"Car_HeaderRightBlockUnique"},[e("div",{staticClass:"Car_HeaderStatValue"},[a._v(a._s(a._f("resolveStat")(a.car,"acel",a.customData)))]),e("div",{staticClass:"Car_HeaderStatLabel"},[a._v("0-60MPH")])]),e("div",{staticClass:"Car_HeaderRightBlockUnique"},[e("div",{staticClass:"Car_HeaderStatValue"},[a._v(a._s(a._f("resolveStat")(a.car,"hand",a.customData)))]),e("div",{staticClass:"Car_HeaderStatLabel"},[a._v(a._s(a.$t("c_handling").toUpperCase()))])]),e("div",{staticClass:"Car_HeaderRightBlockUnique"},[e("div",{staticClass:"Car_HeaderStatValue Car_HeaderStatLabelDrive"},[a._v(a._s(this.resolveCar.drive||"-"))]),e("div",{staticClass:"Car_HeaderStatLabel"},[a._v(a._s(a.$tc("c_drive",1).toUpperCase()))])])]),e("div",{staticClass:"Car_HeaderName",class:{Car_HeaderNameBig:a.car.name.length>28,Car_HeaderNameBigBig:a.car.name.length>34}},[a._v(a._s(a.car.name))]),a.showCompactOverlay?e("div",{staticClass:"Car_CompactOverlay",on:{touchstart:function(s){return a.touchstart(s)},touchend:function(s){return a.touchend()},mousedown:function(s){return a.$emit("dragdown",s)},click:function(s){return a.invertedClick(s)}}}):a._e()],2),e("div",{staticClass:"Car_Header2",class:{Car_Loading:a.downloadLoading},style:`--class-color: ${a.carClassColor}`,on:{mousedown:function(s){return a.$emit("dragdown",s)},touchstart:function(s){return a.touchstart(s)},touchend:function(s){return a.touchend()},click:function(s){return a.invertedClick(s)}}},[e("div",{staticClass:"BaseCard_Header2Left"},[e("img",{staticClass:"BaseCard_Header2Img",attrs:{src:a.carPhotoSrc,loading:"lazy",alt:""}})]),e("div",{staticClass:"BaseCard_Header2Right"},[e("div",{staticClass:"BaseCard_Header2Top"},[e("b",[a._v("["+a._s(a.resolveCar.rq)+"]")]),a._v(" "+a._s(a.car.brand))]),e("div",{staticClass:"BaseCard_Header2Bottom"},[a._v(a._s(a.car.onlyName))])]),e("div",{staticClass:"BaseCard_Header2Right2"},[a._v(a._s(a.resolveCar.rq))])])])},l=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"Car_HeaderRQLabel"},[a("i",{staticClass:"tdicon-rq",attrs:{"aria-hidden":"true"}})])}],c=r(i,o,l,!1,null,null);const d=c.exports;export{d as B};
